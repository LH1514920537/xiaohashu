2025-05-05 19:51:29.201 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 19:51:29.285 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 19:51:31.184 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 19:51:31.201 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 19:51:31.202 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-05-05 19:51:31.944 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-05 19:51:31.948 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-05 19:51:31.982 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2025-05-05 19:51:32.199 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=6d2982de-21d6-33a6-88b0-6aa55322bf40
2025-05-05 19:51:32.517 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.579 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.582 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.587 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.588 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$713/0x00000292c54e79d8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.590 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.599 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.600 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 19:51:32.925 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-05-05 19:51:32.926 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-05 19:51:32.926 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-05 19:51:32.932 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-05 19:51:32.945 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-05 19:51:32.946 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-05 19:51:33.083 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-05 19:51:33.083 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1863 ms
2025-05-05 19:51:33.218 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-05 19:51:33.615 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-05 19:51:34.665 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 19:51:34.666 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-05 19:51:35.003 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-05 19:51:35.154 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 19:51:35.154 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-05-05 19:51:35.242 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 19:51:35.242 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-05-05 19:51:35.330 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 19:51:35.330 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-05-05 19:51:35.414 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 19:51:35.415 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-05-05 19:51:37.182 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 19:51:39.473 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 19:51:39.571 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-05-05 19:51:39.578 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 19:51:39.578 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-05 19:51:39.579 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-05 19:51:39.579 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-05 19:51:39.609 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-05 19:51:39.609 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-05 19:51:39.610 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-05 19:51:39.614 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-05 19:51:39.615 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-05 19:51:39.619 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-05 19:51:39.629 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of ee49b328-65b2-4413-9f51-147f40b6776e
2025-05-05 19:51:39.661 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-05 19:51:39.662 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-05 19:51:39.662 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-05 19:51:39.665 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-05 19:51:39.703 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-05 19:51:41.348 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746445901137_127.0.0.1_51789
2025-05-05 19:51:41.349 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Notify connected event to listeners.
2025-05-05 19:51:41.349 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-05 19:51:41.350 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-05 19:51:41.350 [main] INFO  com.alibaba.nacos.common.remote.client - [ee49b328-65b2-4413-9f51-147f40b6776e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1230/0x00000292c5975180
2025-05-05 19:51:41.352 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-05 19:51:41.371 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.37.1:8090 register finished
2025-05-05 19:51:42.943 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 19:51:42.953 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 15.843 seconds (process running for 16.51)
2025-05-05 19:52:37.485 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 19:52:37.487 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":12,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-05 19:52:13\"}"]
2025-05-05 19:54:45.612 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 19:54:45.612 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":12,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-05 19:54:45\"}"]
2025-05-05 19:54:55.620 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 19:54:55.620 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":12,\"noteId\":1917455195910963219,\"type\":0,\"createTime\":\"2025-05-05 19:54:55\"}"]
2025-05-05 20:21:44.024 [Thread-18] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-05 20:21:44.024 [Thread-15] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-05 20:21:44.024 [Thread-15] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-05 20:21:44.024 [Thread-18] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-05 20:21:44.097 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-05 20:21:44.097 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-count with instance: Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-05 20:21:44.099 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-05 20:21:44.100 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-05 20:21:44.101 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-05 20:21:44.101 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4fff076d[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-05 20:21:44.101 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746445901137_127.0.0.1_51789
2025-05-05 20:21:44.103 [nacos-grpc-client-executor-127.0.0.1-404] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746445901137_127.0.0.1_51789]Ignore complete event,isRunning:false,isAbandon=false
2025-05-05 20:21:44.104 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@50df4579[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 405]
2025-05-05 20:21:44.104 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1c5d5747[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 601]
2025-05-05 20:21:44.104 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-05 20:21:44.104 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-05 20:21:44.104 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-05 20:21:44.105 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:44.105 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:44.105 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:44.105 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:44.125 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:44.126 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-05 20:21:44.127 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-05 20:21:51.335 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 20:21:51.405 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 20:21:53.216 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 20:21:53.231 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 20:21:53.232 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-05-05 20:21:53.754 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-05 20:21:53.760 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-05 20:21:53.783 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-05 20:21:53.978 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=f1b552f0-f17b-3b67-9419-a42e56d20773
2025-05-05 20:21:54.233 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.281 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.283 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.287 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.287 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$713/0x000001de2f4e77d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.289 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.296 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.297 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-05 20:21:54.539 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-05-05 20:21:54.540 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-05 20:21:54.541 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-05 20:21:54.546 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-05 20:21:54.556 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-05 20:21:54.556 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-05 20:21:54.651 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-05 20:21:54.651 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1403 ms
2025-05-05 20:21:54.747 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-05 20:21:55.064 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-05 20:21:55.820 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:55.820 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-05 20:21:56.103 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-05 20:21:56.249 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:56.250 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-05-05 20:21:56.339 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:56.339 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-05-05 20:21:56.424 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:56.424 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-05-05 20:21:56.508 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:56.508 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-05-05 20:21:56.601 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-05 20:21:56.601 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-05-05 20:21:58.324 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 20:22:00.442 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 20:22:00.517 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-05-05 20:22:00.524 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-05 20:22:00.524 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-05 20:22:00.525 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-05 20:22:00.525 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-05 20:22:00.550 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-05 20:22:00.550 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-05 20:22:00.551 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-05 20:22:00.555 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-05 20:22:00.555 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-05 20:22:00.558 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-05 20:22:00.567 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 8d4f486c-fd2c-4cb4-ba7c-c633951502e4
2025-05-05 20:22:00.587 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-05 20:22:00.587 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-05 20:22:00.587 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-05 20:22:00.589 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-05 20:22:00.619 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-05 20:22:01.987 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746447721791_127.0.0.1_52010
2025-05-05 20:22:01.987 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Notify connected event to listeners.
2025-05-05 20:22:01.987 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-05 20:22:01.988 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-05 20:22:01.988 [main] INFO  com.alibaba.nacos.common.remote.client - [8d4f486c-fd2c-4cb4-ba7c-c633951502e4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1230/0x000001de2f978000
2025-05-05 20:22:01.989 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-05 20:22:02.001 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.37.1:8090 register finished
2025-05-05 20:22:03.475 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-05 20:22:03.482 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 14.257 seconds (process running for 14.972)
2025-05-05 20:22:24.989 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 20:22:24.992 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":12,\"noteId\":1917455652288987188,\"type\":1,\"createTime\":\"2025-05-05 20:22:23\"}"]
2025-05-05 20:22:25.009 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: {"1917455652288987188":1}
2025-05-05 20:22:25.297 [NettyClientPublicExecutor_1] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001835063947C6B18F899040000, offsetMsgId=C0A80A6700002A9F00000000006B0746, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2025-05-05 20:22:37.551 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, {"1917455652288987188":1}...
2025-05-05 20:22:37.581 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-05 20:22:37.805 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455652288987188(Long), 1(Integer), 1(Integer)
2025-05-05 20:22:37.813 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 1
2025-05-05 20:23:27.336 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 20:23:27.336 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":12,\"noteId\":1917455652288987188,\"type\":0,\"createTime\":\"2025-05-05 20:23:26\"}"]
2025-05-05 20:23:27.337 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: {"1917455652288987188":-1}
2025-05-05 20:23:27.343 [NettyClientPublicExecutor_2] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001835063947C6B18F98B6C0001, offsetMsgId=C0A80A6700002A9F00000000006B0BE4, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2025-05-05 20:23:27.355 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, {"1917455652288987188":-1}...
2025-05-05 20:23:27.355 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-05 20:23:27.356 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455652288987188(Long), -1(Integer), -1(Integer)
2025-05-05 20:23:27.361 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-05-05 23:10:35.682 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 23:10:35.682 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":8,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-05 23:10:34\"}"]
2025-05-05 23:10:35.682 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: {"1917455195910963219":1}
2025-05-05 23:10:35.689 [NettyClientPublicExecutor_3] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001835063947C6B199290A50002, offsetMsgId=C0A845D100002A9F00000000006B107F, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2025-05-05 23:10:35.704 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, {"1917455195910963219":1}...
2025-05-05 23:10:35.710 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-05 23:10:35.711 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455195910963219(Long), 1(Integer), 1(Integer)
2025-05-05 23:10:35.725 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 1
2025-05-05 23:20:30.258 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-05 23:20:30.258 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":8,\"noteId\":1917455652288987188,\"type\":1,\"createTime\":\"2025-05-05 23:20:29\"}"]
2025-05-05 23:20:30.258 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: {"1917455652288987188":1}
2025-05-05 23:20:30.267 [NettyClientPublicExecutor_4] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001835063947C6B199BA3380003, offsetMsgId=C0A845D100002A9F00000000006B1519, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2025-05-05 23:20:30.270 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, {"1917455652288987188":1}...
2025-05-05 23:20:30.271 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-05 23:20:30.271 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455652288987188(Long), 1(Integer), 1(Integer)
2025-05-05 23:20:30.277 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
