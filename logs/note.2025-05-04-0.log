2025-05-04 00:02:19.505 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 00:02:19.505 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 00:02:19.506 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 00:02:19.506 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 00:02:19.584 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 00:02:19.585 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user with instance: Instance{instanceId='null', ip='192.168.37.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 00:02:19.588 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 00:02:19.589 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 00:02:19.589 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 00:02:19.589 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 00:02:19.589 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@3c2666fd[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 00:02:19.590 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746287396350_127.0.0.1_55362
2025-05-04 00:02:19.592 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@30951bc3[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 168]
2025-05-04 00:02:19.593 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@690c717c[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 248]
2025-05-04 00:02:19.593 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 00:02:19.593 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 00:02:19.593 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 00:02:19.736 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 00:02:19.743 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 14:47:59.449 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:59.507 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:48:01.408 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:48:01.422 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:48:01.423 [main] INFO  c.q.xiaohashu.user.biz.XiaohashuUserBizApplication - The following 1 profile is active: "dev"
2025-05-04 14:48:01.950 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 14:48:01.954 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 14:48:01.984 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-05-04 14:48:02.235 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=382453da-327f-3442-95c7-eb16648e04c3
2025-05-04 14:48:02.272 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.oss.api.FileFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:48:02.274 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:48:02.277 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:48:03.122 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8082 (http)
2025-05-04 14:48:03.123 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 14:48:03.124 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 14:48:03.129 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 14:48:03.140 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 14:48:03.140 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 14:48:03.247 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 14:48:03.247 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1805 ms
2025-05-04 14:48:03.360 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 14:48:03.730 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 14:48:04.197 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-oss' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 14:48:04.618 [main] INFO  c.q.xiaohashu.user.biz.config.RedisTemplateConfig - Redis工厂创建成功org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory@4a49919c
2025-05-04 14:48:04.713 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 14:48:05.064 [main] INFO  org.redisson.Version - Redisson 3.16.6
2025-05-04 14:48:05.421 [redisson-netty-4-24] INFO  org.redisson.connection.pool.PubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 14:48:05.421 [redisson-netty-4-23] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 14:48:05.424 [redisson-netty-4-4] INFO  org.redisson.connection.pool.SlaveConnectionPool - 24 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 14:48:05.424 [redisson-netty-4-5] INFO  org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 14:48:07.217 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:09.347 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:09.442 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8082 (http) with context path ''
2025-05-04 14:48:09.447 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:48:09.448 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 14:48:09.448 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 14:48:09.449 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 14:48:09.471 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 14:48:09.471 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 14:48:09.472 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 14:48:09.476 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 14:48:09.476 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 14:48:09.479 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 14:48:09.487 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54
2025-05-04 14:48:09.504 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 14:48:09.504 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 14:48:09.504 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 14:48:09.506 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 14:48:09.539 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 14:48:10.803 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746341290625_127.0.0.1_52133
2025-05-04 14:48:10.803 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Notify connected event to listeners.
2025-05-04 14:48:10.803 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 14:48:10.804 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 14:48:10.804 [main] INFO  com.alibaba.nacos.common.remote.client - [7bf0bf1c-1d03-4a8e-b4b2-30b5d3998f54] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1398/0x000001b091a4c150
2025-05-04 14:48:10.805 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user with instance Instance{instanceId='null', ip='192.168.37.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 14:48:10.818 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user 192.168.37.1:8082 register finished
2025-05-04 14:48:12.331 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:12.338 [main] INFO  c.q.xiaohashu.user.biz.XiaohashuUserBizApplication - Started XiaohashuUserBizApplication in 14.924 seconds (process running for 15.652)
2025-05-04 14:48:12.339 [main] INFO  c.q.x.u.biz.runner.PushRolePermissions2RedisRunner - ==> 服务启动，开始同步角色权限数据到 Redis 中...
2025-05-04 14:48:12.381 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - ==>  Preparing: select id, role_key, role_name from t_role where status = 0 and is_deleted = 0
2025-05-04 14:48:12.544 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - ==> Parameters: 
2025-05-04 14:48:12.565 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - <==      Total: 1
2025-05-04 14:48:12.586 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - ==>  Preparing: select role_id, permission_id from t_role_permission_rel where role_id in ( ? )
2025-05-04 14:48:12.588 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - ==> Parameters: 1(Long)
2025-05-04 14:48:12.591 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - <==      Total: 2
2025-05-04 14:48:12.592 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - ==>  Preparing: select id, name, permission_key from t_permission where status = 0 and type = 3 and is_deleted = 0
2025-05-04 14:48:12.593 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - ==> Parameters: 
2025-05-04 14:48:12.595 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - <==      Total: 2
2025-05-04 14:48:12.874 [main] INFO  c.q.x.u.biz.runner.PushRolePermissions2RedisRunner - ==> 服务启动，成功同步角色权限数据到 Redis 中...
2025-05-04 14:50:06.033 [http-nio-8082-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 14:50:06.033 [http-nio-8082-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 14:50:06.034 [http-nio-8082-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 14:50:06.045 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 14:50:06.048 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 14:50:06.131 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[8,11,12]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 14:50:06.144 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 14ms, 出参: {"success":true,"data":[{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"},{"id":11,"nickName":"小红薯4"},{"id":12,"nickName":"小红薯10005"}]} =================================== 
2025-05-04 14:50:06.157 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 15:21:48.031 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 15:21:48.031 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 15:21:48.032 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 15:21:48.032 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 15:21:48.075 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 15:21:48.075 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user with instance: Instance{instanceId='null', ip='192.168.37.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 15:21:48.078 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@47c1a329[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 15:21:48.079 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746341290625_127.0.0.1_52133
2025-05-04 15:21:48.081 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@597ae87b[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 456]
2025-05-04 15:21:48.081 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2402017a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 672]
2025-05-04 15:21:48.081 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 15:21:48.081 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 15:21:48.081 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 15:21:48.218 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 15:21:48.219 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 15:21:52.364 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:52.423 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:54.272 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:54.286 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:54.286 [main] INFO  c.q.xiaohashu.user.biz.XiaohashuUserBizApplication - The following 1 profile is active: "dev"
2025-05-04 15:21:54.822 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:21:54.825 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:21:54.848 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-05-04 15:21:55.039 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=382453da-327f-3442-95c7-eb16648e04c3
2025-05-04 15:21:55.068 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.oss.api.FileFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:55.070 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:55.071 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:55.690 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8082 (http)
2025-05-04 15:21:55.691 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 15:21:55.691 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 15:21:55.695 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 15:21:55.705 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 15:21:55.705 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 15:21:55.807 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 15:21:55.807 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1502 ms
2025-05-04 15:21:55.913 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 15:21:56.189 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 15:21:56.492 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-oss' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 15:21:56.811 [main] INFO  c.q.xiaohashu.user.biz.config.RedisTemplateConfig - Redis工厂创建成功org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory@4a49919c
2025-05-04 15:21:56.903 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 15:21:57.217 [main] INFO  org.redisson.Version - Redisson 3.16.6
2025-05-04 15:21:57.572 [redisson-netty-4-2] INFO  org.redisson.connection.pool.PubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 15:21:57.572 [redisson-netty-4-32] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 15:21:57.585 [redisson-netty-4-2] INFO  org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 15:21:57.586 [redisson-netty-4-5] INFO  org.redisson.connection.pool.SlaveConnectionPool - 24 connections initialized for 127.0.0.1/127.0.0.1:6379
2025-05-04 15:21:59.313 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:22:01.420 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:22:01.518 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8082 (http) with context path ''
2025-05-04 15:22:01.524 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:22:01.524 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 15:22:01.525 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 15:22:01.525 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 15:22:01.546 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 15:22:01.547 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 15:22:01.548 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 15:22:01.551 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 15:22:01.551 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 15:22:01.554 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 15:22:01.563 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d3a6bd46-c679-4d8d-a63a-97d4a98fb356
2025-05-04 15:22:01.579 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 15:22:01.580 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 15:22:01.580 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 15:22:01.582 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 15:22:01.617 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 15:22:02.853 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746343322673_127.0.0.1_63706
2025-05-04 15:22:02.853 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Notify connected event to listeners.
2025-05-04 15:22:02.853 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 15:22:02.854 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 15:22:02.854 [main] INFO  com.alibaba.nacos.common.remote.client - [d3a6bd46-c679-4d8d-a63a-97d4a98fb356] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1430/0x00000285e5a51228
2025-05-04 15:22:02.855 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user with instance Instance{instanceId='null', ip='192.168.37.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 15:22:02.868 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user 192.168.37.1:8082 register finished
2025-05-04 15:22:04.323 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:22:04.330 [main] INFO  c.q.xiaohashu.user.biz.XiaohashuUserBizApplication - Started XiaohashuUserBizApplication in 14.045 seconds (process running for 14.702)
2025-05-04 15:22:04.331 [main] INFO  c.q.x.u.biz.runner.PushRolePermissions2RedisRunner - ==> 服务启动，开始同步角色权限数据到 Redis 中...
2025-05-04 15:22:04.364 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - ==>  Preparing: select id, role_key, role_name from t_role where status = 0 and is_deleted = 0
2025-05-04 15:22:04.492 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - ==> Parameters: 
2025-05-04 15:22:04.508 [main] DEBUG c.q.x.u.b.d.mapper.RoleDOMapper.selectEnabledList - <==      Total: 1
2025-05-04 15:22:04.525 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - ==>  Preparing: select role_id, permission_id from t_role_permission_rel where role_id in ( ? )
2025-05-04 15:22:04.527 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - ==> Parameters: 1(Long)
2025-05-04 15:22:04.529 [main] DEBUG c.q.x.u.b.d.m.R.selectByRoleId - <==      Total: 2
2025-05-04 15:22:04.530 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - ==>  Preparing: select id, name, permission_key from t_permission where status = 0 and type = 3 and is_deleted = 0
2025-05-04 15:22:04.531 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - ==> Parameters: 
2025-05-04 15:22:04.532 [main] DEBUG c.q.x.u.b.d.m.P.selectAppEnabledList - <==      Total: 2
2025-05-04 15:22:04.767 [main] INFO  c.q.x.u.biz.runner.PushRolePermissions2RedisRunner - ==> 服务启动，成功同步角色权限数据到 Redis 中...
2025-05-04 15:22:30.165 [http-nio-8082-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:22:30.166 [http-nio-8082-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 15:22:30.167 [http-nio-8082-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-04 15:22:30.179 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 15:22:30.181 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 15:22:30.269 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[11]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 15:22:30.282 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 13ms, 出参: {"success":true,"data":[{"id":11,"nickName":"小红薯4"}]} =================================== 
2025-05-04 15:22:30.294 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:08:43.340 [http-nio-8082-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:08:43.340 [http-nio-8082-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:08:43.345 [http-nio-8082-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":8}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 17:08:43.349 [http-nio-8082-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 5ms, 出参: {"success":true,"data":{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"}} =================================== 
2025-05-04 17:08:43.350 [http-nio-8082-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:09:00.936 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:09:00.936 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:09:00.937 [http-nio-8082-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":11}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 17:09:00.939 [http-nio-8082-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 1ms, 出参: {"success":true,"data":{"id":11,"nickName":"小红薯4"}} =================================== 
2025-05-04 17:09:00.940 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:09:04.894 [http-nio-8082-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:09:04.895 [http-nio-8082-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:09:04.896 [http-nio-8082-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":12}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 17:09:04.898 [http-nio-8082-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 2ms, 出参: {"success":true,"data":{"id":12,"nickName":"小红薯10005"}} =================================== 
2025-05-04 17:09:04.899 [http-nio-8082-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:09:27.881 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:09:27.882 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:09:27.882 [http-nio-8082-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[12,11,8]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 17:09:27.884 [http-nio-8082-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 2ms, 出参: {"success":true,"data":[{"id":12,"nickName":"小红薯10005"},{"id":11,"nickName":"小红薯4"},{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"}]} =================================== 
2025-05-04 17:09:27.885 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:10:10.747 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:10:10.747 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:10:10.747 [http-nio-8082-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[12,11,8]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 17:10:10.750 [http-nio-8082-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 2ms, 出参: {"success":true,"data":[{"id":12,"nickName":"小红薯10005"},{"id":11,"nickName":"小红薯4"},{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"}]} =================================== 
2025-05-04 17:10:10.751 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:10:19.584 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:10:19.584 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:10:19.585 [http-nio-8082-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[12,11,8]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 17:10:19.586 [http-nio-8082-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 1ms, 出参: {"success":true,"data":[{"id":12,"nickName":"小红薯10005"},{"id":11,"nickName":"小红薯4"},{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"}]} =================================== 
2025-05-04 17:10:19.587 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:06.407 [http-nio-8082-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:06.407 [http-nio-8082-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:06.408 [http-nio-8082-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [批量查询用户信息], 入参: {"ids":[100,12,8]}, 请求类: UserController, 请求方法: findByIds =================================== 
2025-05-04 17:24:06.417 [http-nio-8082-exec-10] DEBUG c.q.x.u.biz.domain.mapper.UserDOMapper.selectByIds - ==>  Preparing: select id, nickname, avatar, introduction from t_user where status = 0 and is_deleted = 0 and id in ( ? )
2025-05-04 17:24:06.417 [http-nio-8082-exec-10] DEBUG c.q.x.u.biz.domain.mapper.UserDOMapper.selectByIds - ==> Parameters: 100(Long)
2025-05-04 17:24:06.420 [http-nio-8082-exec-10] DEBUG c.q.x.u.biz.domain.mapper.UserDOMapper.selectByIds - <==      Total: 1
2025-05-04 17:24:06.421 [http-nio-8082-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [批量查询用户信息], 耗时: 13ms, 出参: {"success":true,"data":[{"id":12,"nickName":"小红薯10005"},{"id":8,"nickName":"小红鼠8","avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","introduction":"程序员"},{"id":100,"nickName":"小红薯10100"}]} =================================== 
2025-05-04 17:24:06.423 [http-nio-8082-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:43.556 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:43.556 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:43.557 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":11}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 17:24:43.560 [http-nio-8082-exec-1] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=11, nickName=小红薯4, avatar=null, introduction=null)
2025-05-04 17:24:43.561 [http-nio-8082-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 4ms, 出参: {"success":true,"data":{"id":11,"nickName":"小红薯4"}} =================================== 
2025-05-04 17:24:43.562 [http-nio-8082-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:59.185 [http-nio-8082-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:59.185 [http-nio-8082-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:59.187 [http-nio-8082-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":11}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 17:24:59.187 [http-nio-8082-exec-2] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=11, nickName=小红薯4, avatar=null, introduction=null)
2025-05-04 17:24:59.187 [http-nio-8082-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 1ms, 出参: {"success":true,"data":{"id":11,"nickName":"小红薯4"}} =================================== 
2025-05-04 17:24:59.188 [http-nio-8082-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:19:32.927 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:19:32.928 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:19:32.935 [http-nio-8082-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":12}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 21:19:32.935 [http-nio-8082-exec-3] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=12, nickName=小红薯10005, avatar=null, introduction=null)
2025-05-04 21:19:32.935 [http-nio-8082-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 1ms, 出参: {"success":true,"data":{"id":12,"nickName":"小红薯10005"}} =================================== 
2025-05-04 21:19:32.937 [http-nio-8082-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:23:40.166 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:23:40.166 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:23:40.167 [http-nio-8082-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":12}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 21:23:40.167 [http-nio-8082-exec-6] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=12, nickName=小红薯10005, avatar=null, introduction=null)
2025-05-04 21:23:40.167 [http-nio-8082-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 0ms, 出参: {"success":true,"data":{"id":12,"nickName":"小红薯10005"}} =================================== 
2025-05-04 21:23:40.168 [http-nio-8082-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:23:47.140 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:23:47.140 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:23:47.141 [http-nio-8082-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":12}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 21:23:47.142 [http-nio-8082-exec-7] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=12, nickName=小红薯10005, avatar=null, introduction=null)
2025-05-04 21:23:47.142 [http-nio-8082-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 1ms, 出参: {"success":true,"data":{"id":12,"nickName":"小红薯10005"}} =================================== 
2025-05-04 21:23:47.143 [http-nio-8082-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:24:08.770 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:24:08.770 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:24:08.771 [http-nio-8082-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户信息], 入参: {"id":12}, 请求类: UserController, 请求方法: findById =================================== 
2025-05-04 21:24:08.771 [http-nio-8082-exec-8] INFO  c.q.x.user.biz.service.impl.UserServiceImpl - ==> 命中了本地缓存；FindUserByIdRespDTO(id=12, nickName=小红薯10005, avatar=null, introduction=null)
2025-05-04 21:24:08.771 [http-nio-8082-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户信息], 耗时: 0ms, 出参: {"success":true,"data":{"id":12,"nickName":"小红薯10005"}} =================================== 
2025-05-04 21:24:08.772 [http-nio-8082-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 23:44:33.585 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 23:44:33.585 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 23:44:33.585 [Thread-8] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 23:44:33.586 [Thread-11] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 23:44:33.665 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 23:44:33.665 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user with instance: Instance{instanceId='null', ip='192.168.37.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 23:44:33.668 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 23:44:33.668 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 23:44:33.668 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 23:44:33.668 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@535d9fd9[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 23:44:33.669 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746343322673_127.0.0.1_63706
2025-05-04 23:44:33.671 [nacos-grpc-client-executor-127.0.0.1-5202] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746343322673_127.0.0.1_63706]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 23:44:33.674 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@617fafe6[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 5203]
2025-05-04 23:44:33.674 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@5c0635d9[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 8605]
2025-05-04 23:44:33.675 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 23:44:33.675 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 23:44:33.675 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 23:44:33.831 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 23:44:33.832 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
