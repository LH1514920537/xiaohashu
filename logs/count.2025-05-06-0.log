2025-05-06 00:00:30.442 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-06 00:00:30.442 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-06 00:00:30.442 [Thread-16] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-06 00:00:30.443 [Thread-19] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-06 00:00:30.560 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-06 00:00:30.560 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-count with instance: Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-06 00:00:30.563 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-06 00:00:30.564 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@31a87426[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-06 00:00:30.565 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746447721791_127.0.0.1_52010
2025-05-06 00:00:30.567 [nacos-grpc-client-executor-127.0.0.1-2649] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746447721791_127.0.0.1_52010]Ignore complete event,isRunning:false,isAbandon=false
2025-05-06 00:00:30.586 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3bff86e9[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 2650]
2025-05-06 00:00:30.587 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@22eaa200[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 4369]
2025-05-06 00:00:30.587 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-06 00:00:30.587 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-06 00:00:30.587 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-06 00:00:30.589 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.589 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.589 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.590 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.590 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.721 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 00:00:30.722 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-06 00:00:30.723 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-06 21:43:54.360 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 21:43:54.425 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 21:43:56.223 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 21:43:56.236 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 21:43:56.236 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-05-06 21:43:56.739 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-06 21:43:56.742 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-06 21:43:56.764 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-05-06 21:43:56.930 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=9b3f2fe5-be0b-3656-8edf-2a7219d75c16
2025-05-06 21:43:57.177 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.224 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.226 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.229 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.230 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$713/0x000002d4b84e77d0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.231 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.237 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.238 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 21:43:57.472 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-05-06 21:43:57.473 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-06 21:43:57.473 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-06 21:43:57.478 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-06 21:43:57.486 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-06 21:43:57.487 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-06 21:43:57.572 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-06 21:43:57.573 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1322 ms
2025-05-06 21:43:57.659 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-06 21:43:57.977 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-06 21:43:58.714 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:58.715 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-06 21:43:58.990 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-06 21:43:59.130 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.130 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-05-06 21:43:59.218 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.218 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-05-06 21:43:59.302 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.302 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-05-06 21:43:59.384 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.384 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollect2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-05-06 21:43:59.496 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.497 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollectConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-05-06 21:43:59.582 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.582 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_7
2025-05-06 21:43:59.670 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 21:43:59.670 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_8
2025-05-06 21:44:00.537 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-05-06 21:44:00.548 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":8,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-06 21:42:03\"}"]
2025-05-06 21:44:00.598 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: {"1917455195910963219":1}
2025-05-06 21:44:00.899 [NettyClientPublicExecutor_1] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014DA063947C6B1E69A8750000, offsetMsgId=C0A80A6500002A9F00000000006B23B7, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2025-05-06 21:44:01.397 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 21:44:03.511 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 21:44:03.580 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-05-06 21:44:03.586 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 21:44:03.586 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-06 21:44:03.587 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-06 21:44:03.587 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-06 21:44:03.613 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-06 21:44:03.613 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-06 21:44:03.613 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-06 21:44:03.617 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-06 21:44:03.617 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-06 21:44:03.620 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-06 21:44:03.629 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6e2fbc63-4288-4227-a104-727262de4c49
2025-05-06 21:44:03.647 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-06 21:44:03.647 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-06 21:44:03.648 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-06 21:44:03.650 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-06 21:44:03.657 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-06 21:44:04.909 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746539044748_127.0.0.1_57783
2025-05-06 21:44:04.909 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Notify connected event to listeners.
2025-05-06 21:44:04.909 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-06 21:44:04.910 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-06 21:44:04.910 [main] INFO  com.alibaba.nacos.common.remote.client - [6e2fbc63-4288-4227-a104-727262de4c49] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1332/0x000002d4b89ae300
2025-05-06 21:44:04.911 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-06 21:44:04.921 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.37.1:8090 register finished
2025-05-06 21:44:06.369 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 21:44:06.376 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 14.123 seconds (process running for 14.818)
2025-05-06 21:44:41.435 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, {"1917455195910963219":1}...
2025-05-06 21:44:41.460 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-05-06 21:44:41.681 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1917455195910963219(Long), 1(Integer), 1(Integer)
2025-05-06 21:44:41.692 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-05-06 22:06:58.214 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-05-06 22:06:58.214 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":8,\"noteId\":1917455652288987188,\"type\":1,\"createTime\":\"2025-05-06 22:06:57\"}"]
2025-05-06 22:06:58.214 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: {"1917455652288987188":1}
2025-05-06 22:06:58.220 [NettyClientPublicExecutor_2] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014DA063947C6B1E7EACA90001, offsetMsgId=C0A80A6500002A9F00000000006B2860, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2025-05-06 22:06:58.230 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, {"1917455652288987188":1}...
2025-05-06 22:06:58.236 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-05-06 22:06:58.236 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1917455652288987188(Long), 1(Integer), 1(Integer)
2025-05-06 22:06:58.243 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-05-06 22:12:13.517 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-05-06 22:12:13.517 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":8,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-06 22:12:12\"}"]
2025-05-06 22:12:13.517 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: {"1917455195910963219":1}
2025-05-06 22:12:13.523 [NettyClientPublicExecutor_3] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014DA063947C6B1E837C510002, offsetMsgId=C0A80A6500002A9F00000000006B2D09, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2025-05-06 22:12:13.526 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, {"1917455195910963219":1}...
2025-05-06 22:12:13.527 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-05-06 22:12:13.528 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1917455195910963219(Long), 1(Integer), 1(Integer)
2025-05-06 22:12:13.532 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-05-06 22:12:41.871 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-06 22:12:41.871 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":8,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-06 22:12:40\"}"]
2025-05-06 22:12:41.874 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: {"1917455195910963219":1}
2025-05-06 22:12:41.883 [NettyClientPublicExecutor_4] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014DA063947C6B1E83EB190003, offsetMsgId=C0A80A6500002A9F00000000006B31A6, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=3], queueOffset=1]
2025-05-06 22:12:41.887 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, {"1917455195910963219":1}...
2025-05-06 22:12:41.889 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-06 22:12:41.890 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455195910963219(Long), 1(Integer), 1(Integer)
2025-05-06 22:12:41.896 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-05-06 22:42:39.886 [Thread-18] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-06 22:42:39.887 [Thread-18] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-06 22:42:39.888 [Thread-21] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-06 22:42:39.890 [Thread-21] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-06 22:42:40.043 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-06 22:42:40.044 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-count with instance: Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-06 22:42:40.047 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-06 22:42:40.048 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-06 22:42:40.049 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-06 22:42:40.049 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-06 22:42:40.049 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-06 22:42:40.049 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@33c58fa6[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-06 22:42:40.049 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746539044748_127.0.0.1_57783
2025-05-06 22:42:40.051 [nacos-grpc-client-executor-127.0.0.1-745] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746539044748_127.0.0.1_57783]Ignore complete event,isRunning:false,isAbandon=false
2025-05-06 22:42:40.056 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@68915ecd[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 746]
2025-05-06 22:42:40.056 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@24ec99b[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1171]
2025-05-06 22:42:40.056 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-06 22:42:40.056 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-06 22:42:40.056 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.058 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.059 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.190 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:40.191 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-06 22:42:40.193 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-06 22:42:50.205 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 22:42:50.279 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 22:42:52.204 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 22:42:52.224 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 22:42:52.225 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-05-06 22:42:52.914 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-06 22:42:52.920 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-06 22:42:52.944 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-05-06 22:42:53.186 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=9b3f2fe5-be0b-3656-8edf-2a7219d75c16
2025-05-06 22:42:53.505 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.577 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.582 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.588 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.588 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$713/0x0000019bad4e79d8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.590 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.600 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.602 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-06 22:42:53.922 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-05-06 22:42:53.923 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-06 22:42:53.923 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-06 22:42:53.929 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-06 22:42:53.941 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-06 22:42:53.942 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-06 22:42:54.060 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-06 22:42:54.060 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1813 ms
2025-05-06 22:42:54.190 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-06 22:42:54.596 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-06 22:42:55.773 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:55.773 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-06 22:42:56.194 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-06 22:42:56.390 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:56.391 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-05-06 22:42:56.511 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:56.511 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-05-06 22:42:56.625 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:56.625 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-05-06 22:42:56.746 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:56.747 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollect2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-05-06 22:42:56.869 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:56.869 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollectConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-05-06 22:42:57.003 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:57.003 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_7
2025-05-06 22:42:57.112 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-06 22:42:57.112 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_8
2025-05-06 22:42:59.033 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 22:43:01.268 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 22:43:01.341 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-05-06 22:43:01.347 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-06 22:43:01.347 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-06 22:43:01.348 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-06 22:43:01.348 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-06 22:43:01.371 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-06 22:43:01.372 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-06 22:43:01.372 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-06 22:43:01.376 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-06 22:43:01.377 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-06 22:43:01.379 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-06 22:43:01.388 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 34bb6360-39d9-4073-8407-15342e27c5ac
2025-05-06 22:43:01.407 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-06 22:43:01.407 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-06 22:43:01.407 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-06 22:43:01.409 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-06 22:43:01.447 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-06 22:43:02.887 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746542582692_127.0.0.1_55685
2025-05-06 22:43:02.887 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Notify connected event to listeners.
2025-05-06 22:43:02.887 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-06 22:43:02.888 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-06 22:43:02.888 [main] INFO  com.alibaba.nacos.common.remote.client - [34bb6360-39d9-4073-8407-15342e27c5ac] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1231/0x0000019bad9798c0
2025-05-06 22:43:02.889 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.37.1', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-06 22:43:02.904 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.37.1:8090 register finished
2025-05-06 22:43:04.422 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-06 22:43:04.430 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 16.373 seconds (process running for 17.058)
2025-05-06 22:46:06.440 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-06 22:46:06.442 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":100,\"noteId\":1917455195910963219,\"type\":1,\"createTime\":\"2025-05-06 22:46:05\",\"noteCreatorId\":8}"]
2025-05-06 22:46:06.452 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":8,"noteId":1917455195910963219,"count":1}]
2025-05-06 22:46:06.754 [NettyClientPublicExecutor_1] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000189FC63947C6B1EA2829B0000, offsetMsgId=C0A80A6500002A9F00000000006B3668, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=3], queueOffset=2]
2025-05-06 22:46:06.757 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":8,"noteId":1917455195910963219,"count":1}]...
2025-05-06 22:46:06.792 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-06 22:46:07.031 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455195910963219(Long), 1(Integer), 1(Integer)
2025-05-06 22:46:07.038 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-05-06 22:46:07.039 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-06 22:46:07.039 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 8(Long), 1(Integer), 1(Integer)
2025-05-06 22:46:07.045 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-05-06 22:53:05.143 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-05-06 22:53:05.143 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":8,\"noteId\":1917455652288987188,\"type\":1,\"createTime\":\"2025-05-06 22:53:04\",\"noteCreatorId\":8}"]
2025-05-06 22:53:05.143 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":8,"noteId":1917455652288987188,"count":1}]
2025-05-06 22:53:05.152 [NettyClientPublicExecutor_2] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000189FC63947C6B1EA8E4FE0001, offsetMsgId=C0A80A6500002A9F00000000006B3B45, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2025-05-06 22:53:05.164 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":8,"noteId":1917455652288987188,"count":1}]...
2025-05-06 22:53:05.165 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-06 22:53:05.166 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1917455652288987188(Long), 1(Integer), 1(Integer)
2025-05-06 22:53:05.167 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-05-06 22:53:05.167 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-05-06 22:53:05.168 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 8(Long), 1(Integer), 1(Integer)
2025-05-06 22:53:05.169 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-05-06 23:20:38.127 [Thread-21] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-06 23:20:38.127 [Thread-18] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-06 23:20:38.127 [Thread-18] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-06 23:20:38.128 [Thread-21] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
