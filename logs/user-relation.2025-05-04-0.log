2025-05-04 00:02:19.495 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 00:02:19.495 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 00:02:19.495 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 00:02:19.496 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 00:02:19.615 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 00:02:19.615 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 00:02:19.619 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 00:02:19.619 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 00:02:19.619 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6df36510[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 00:02:19.620 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746287041730_127.0.0.1_54888
2025-05-04 00:02:19.622 [nacos-grpc-client-executor-127.0.0.1-230] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746287041730_127.0.0.1_54888]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 00:02:19.625 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@74c3bf8d[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 231]
2025-05-04 00:02:19.626 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2f8edc87[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 365]
2025-05-04 00:02:19.626 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 00:02:19.626 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 00:02:19.626 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 00:02:19.638 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 00:02:19.654 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 00:02:19.655 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 14:47:51.895 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:51.976 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:52.210 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:52.214 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 14:47:52.214 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 14:47:52.215 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 14:47:52.246 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 14:47:52.246 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 14:47:52.250 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 14:47:53.901 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:53.920 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 14:47:53.927 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 337d2943-8911-4530-875c-1919465ef07c_config-0
2025-05-04 14:47:53.953 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x0000015db2368a90
2025-05-04 14:47:53.953 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x0000015db2368eb0
2025-05-04 14:47:53.954 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 14:47:53.955 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 14:47:53.964 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 14:47:54.006 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 14:47:55.753 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746341275509_127.0.0.1_52041
2025-05-04 14:47:55.754 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Notify connected event to listeners.
2025-05-04 14:47:55.754 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [337d2943-8911-4530-875c-1919465ef07c_config-0] Connected,notify listen context...
2025-05-04 14:47:55.755 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 14:47:55.756 [main] INFO  com.alibaba.nacos.common.remote.client - [337d2943-8911-4530-875c-1919465ef07c_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x0000015db24b63d0
2025-05-04 14:47:55.825 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 14:47:55.878 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 14:47:55.891 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 14:47:55.901 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 14:47:55.902 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 14:47:55.939 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 14:47:55.940 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 14:47:56.945 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 14:47:56.950 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 14:47:56.984 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-05-04 14:47:57.221 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 14:47:57.257 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.590 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.655 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.659 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.661 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.662 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x0000015db26c23d8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.664 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.672 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:57.673 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 14:47:58.005 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 14:47:58.006 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 14:47:58.006 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 14:47:58.012 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 14:47:58.025 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 14:47:58.025 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 14:47:58.112 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 14:47:58.113 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2153 ms
2025-05-04 14:47:58.218 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 14:47:58.558 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 14:47:59.712 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 14:47:59.712 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 14:47:59.870 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 14:47:59.939 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 14:48:01.722 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:04.039 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:04.081 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 14:48:04.204 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 14:48:04.211 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 14:48:04.211 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 14:48:04.212 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 14:48:04.224 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 14:48:04.224 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 14:48:04.229 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6b63836d-8f52-4e3f-9e3b-b63a29429167
2025-05-04 14:48:04.232 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 14:48:04.232 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 14:48:04.232 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 14:48:04.233 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 14:48:04.233 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 14:48:04.349 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746341284241_127.0.0.1_52077
2025-05-04 14:48:04.349 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 14:48:04.349 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Notify connected event to listeners.
2025-05-04 14:48:04.349 [main] INFO  com.alibaba.nacos.common.remote.client - [6b63836d-8f52-4e3f-9e3b-b63a29429167] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x0000015db24b63d0
2025-05-04 14:48:04.349 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 14:48:04.351 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 14:48:04.372 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 14:48:05.903 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 14:48:05.915 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 16.147 seconds (process running for 16.965)
2025-05-04 14:48:05.918 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 14:48:05.919 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 14:48:05.926 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 14:48:05.927 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 14:48:05.927 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 14:48:05.927 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 14:48:05.927 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 14:48:05.928 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 14:48:05.928 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 14:48:05.928 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 15:21:08.710 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:21:08.710 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 15:21:08.711 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 15:21:08.718 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 15:21:08.721 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 15:21:08.739 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 15:21:31.359 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 15:21:31.359 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 15:21:31.359 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 15:21:31.360 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 15:21:31.437 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 15:21:31.437 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 15:21:31.440 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@5227609d[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 15:21:31.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746341284241_127.0.0.1_52077
2025-05-04 15:21:31.443 [nacos-grpc-client-executor-127.0.0.1-436] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746341284241_127.0.0.1_52077]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 15:21:31.446 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3fe99c12[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 437]
2025-05-04 15:21:31.446 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@3d7438bd[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 668]
2025-05-04 15:21:31.446 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 15:21:31.446 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 15:21:31.446 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 15:21:31.457 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 15:21:31.474 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 15:21:31.475 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 15:21:41.134 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:41.197 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:41.450 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:41.451 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 15:21:41.452 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 15:21:41.453 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 15:21:41.484 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 15:21:41.484 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 15:21:41.487 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 15:21:43.103 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:43.117 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 15:21:43.121 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0
2025-05-04 15:21:43.139 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x000001d8b6368658
2025-05-04 15:21:43.139 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000001d8b6368a78
2025-05-04 15:21:43.140 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 15:21:43.140 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 15:21:43.148 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 15:21:43.179 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 15:21:44.485 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746343304308_127.0.0.1_63622
2025-05-04 15:21:44.485 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Notify connected event to listeners.
2025-05-04 15:21:44.485 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Connected,notify listen context...
2025-05-04 15:21:44.486 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 15:21:44.486 [main] INFO  com.alibaba.nacos.common.remote.client - [4ea6895b-f5b2-4ec4-8b33-8bf6302b7584_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001d8b64b5f58
2025-05-04 15:21:44.525 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 15:21:44.541 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 15:21:44.546 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 15:21:44.551 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 15:21:44.552 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 15:21:44.573 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 15:21:44.574 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 15:21:45.178 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:21:45.181 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:21:45.203 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-05-04 15:21:45.360 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 15:21:45.389 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.781 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.838 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.841 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.843 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.844 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x000001d8b66c2f38] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.845 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.853 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:45.855 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 15:21:46.116 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 15:21:46.117 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 15:21:46.117 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 15:21:46.121 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 15:21:46.131 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 15:21:46.131 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 15:21:46.206 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 15:21:46.206 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1618 ms
2025-05-04 15:21:46.294 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 15:21:46.595 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 15:21:47.589 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 15:21:47.589 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 15:21:47.698 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 15:21:47.752 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 15:21:49.596 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:21:51.883 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:21:51.904 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 15:21:51.979 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 15:21:51.983 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 15:21:51.983 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 15:21:51.983 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 15:21:51.992 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 15:21:51.992 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 15:21:51.996 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 4670e40c-1fed-4ece-b60e-58a63d2b9732
2025-05-04 15:21:51.997 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 15:21:51.997 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 15:21:51.998 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 15:21:51.998 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 15:21:51.998 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 15:21:52.109 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746343312003_127.0.0.1_63644
2025-05-04 15:21:52.109 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 15:21:52.109 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Notify connected event to listeners.
2025-05-04 15:21:52.109 [main] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001d8b64b5f58
2025-05-04 15:21:52.109 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 15:21:52.110 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 15:21:52.121 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 15:21:53.694 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 15:21:53.704 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 14.585 seconds (process running for 15.264)
2025-05-04 15:21:53.708 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 15:21:53.709 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 15:21:53.716 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 15:21:53.716 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 15:21:53.717 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 15:21:53.717 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 15:21:53.717 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 15:21:53.718 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 15:21:53.718 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 15:21:53.718 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 15:22:29.637 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:22:29.637 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 15:22:29.638 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 15:22:29.645 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 15:22:29.648 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 15:22:29.734 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户关注列表], 入参: {"userId":12,"pageNo":1}, 请求类: RelationController, 请求方法: findFollowingList =================================== 
2025-05-04 15:22:30.023 [http-nio-8089-exec-1] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 15:22:30.079 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-user, group:DEFAULT_GROUP, clusters: 
2025-05-04 15:22:30.088 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2025-05-04 15:22:30.090 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2025-05-04 15:22:30.305 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户关注列表], 耗时: 570ms, 出参: {"success":true,"data":[{"userId":11,"nickname":"小红薯4"}],"pageNo":1,"totalCount":1,"pageSize":10,"totalPage":1} =================================== 
2025-05-04 15:22:30.315 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 15:22:30.614 [nacos-grpc-client-executor-127.0.0.1-17] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Receive server push request, request = NotifySubscriberRequest, requestId = 7
2025-05-04 15:22:30.615 [nacos-grpc-client-executor-127.0.0.1-17] INFO  com.alibaba.nacos.common.remote.client - [4670e40c-1fed-4ece-b60e-58a63d2b9732] Ack server push request, request = NotifySubscriberRequest, requestId = 7
2025-05-04 17:07:22.268 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 17:07:22.268 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 17:07:22.268 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 17:07:22.270 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 17:07:22.363 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 17:07:22.363 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 17:07:22.366 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 17:07:22.366 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 17:07:22.366 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 17:07:22.366 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@26f503cc[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 17:07:22.367 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746343312003_127.0.0.1_63644
2025-05-04 17:07:22.368 [nacos-grpc-client-executor-127.0.0.1-1293] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746343312003_127.0.0.1_63644]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 17:07:22.373 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@14603a58[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 1294]
2025-05-04 17:07:22.373 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@3354b378[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 2109]
2025-05-04 17:07:22.374 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 17:07:22.374 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 17:07:22.374 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 17:07:22.384 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:07:22.505 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 17:07:22.506 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 17:07:30.295 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:07:30.367 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:07:30.609 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:07:30.611 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 17:07:30.611 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 17:07:30.612 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 17:07:30.644 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:07:30.644 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:07:30.647 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 17:07:32.262 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:07:32.277 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 17:07:32.281 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0
2025-05-04 17:07:32.300 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x000001cf30368658
2025-05-04 17:07:32.301 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000001cf30368a78
2025-05-04 17:07:32.301 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 17:07:32.301 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 17:07:32.310 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:07:32.344 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:07:33.759 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746349653563_127.0.0.1_58251
2025-05-04 17:07:33.760 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Notify connected event to listeners.
2025-05-04 17:07:33.760 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Connected,notify listen context...
2025-05-04 17:07:33.760 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:07:33.760 [main] INFO  com.alibaba.nacos.common.remote.client - [68f26956-ba34-4dd8-bcae-f3e9c38f3b88_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001cf304b58a8
2025-05-04 17:07:33.806 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 17:07:33.822 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 17:07:33.828 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 17:07:33.833 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 17:07:33.834 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 17:07:33.860 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:07:33.861 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 17:07:34.533 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 17:07:34.536 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 17:07:34.557 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-05-04 17:07:34.733 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 17:07:34.765 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.006 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.071 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.076 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.078 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.079 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x000001cf306c21e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.081 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.090 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.092 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:07:35.387 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 17:07:35.388 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 17:07:35.388 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 17:07:35.395 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 17:07:35.405 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 17:07:35.405 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 17:07:35.488 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 17:07:35.489 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1610 ms
2025-05-04 17:07:35.596 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 17:07:35.931 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 17:07:37.232 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:07:37.232 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 17:07:37.354 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 17:07:37.419 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 17:07:39.382 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:07:41.477 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:07:41.503 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 17:07:41.581 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 17:07:41.585 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 17:07:41.585 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 17:07:41.586 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 17:07:41.594 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:07:41.594 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:07:41.598 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 1924fe5b-2f00-4760-9147-4342636f2437
2025-05-04 17:07:41.600 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 17:07:41.601 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 17:07:41.601 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 17:07:41.601 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:07:41.602 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:07:41.712 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746349661607_127.0.0.1_58268
2025-05-04 17:07:41.712 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:07:41.712 [main] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001cf304b58a8
2025-05-04 17:07:41.712 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Notify connected event to listeners.
2025-05-04 17:07:41.712 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 17:07:41.713 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 17:07:41.722 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 17:07:43.219 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:07:43.230 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 15.256 seconds (process running for 16.09)
2025-05-04 17:07:43.234 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 17:07:43.234 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 17:07:43.242 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:07:43.242 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 17:07:43.243 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 17:07:43.243 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:07:43.243 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 17:07:43.244 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 17:07:43.244 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:07:43.244 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 17:08:43.133 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 17:08:43.133 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 17:08:43.134 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 17:08:43.141 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:08:43.144 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:08:43.228 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":8}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 17:08:43.237 [http-nio-8089-exec-1] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2025-05-04 17:08:43.300 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-user, group:DEFAULT_GROUP, clusters: 
2025-05-04 17:08:43.312 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2025-05-04 17:08:43.313 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2025-05-04 17:08:43.680 [http-nio-8089-exec-1] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - ==>  Preparing: select user_id, following_user_id, create_time from t_following where user_id = ?
2025-05-04 17:08:43.835 [http-nio-8089-exec-1] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - ==> Parameters: 100(Long)
2025-05-04 17:08:43.853 [http-nio-8089-exec-1] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - <==      Total: 0
2025-05-04 17:08:43.872 [http-nio-8089-exec-1] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=100, followUserId=8, createTime=2025-05-04T17:08:43.362187900)
2025-05-04 17:08:43.875 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 648ms, 出参: {"success":true} =================================== 
2025-05-04 17:08:43.888 [nacos-grpc-client-executor-127.0.0.1-22] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Receive server push request, request = NotifySubscriberRequest, requestId = 9
2025-05-04 17:08:43.888 [nacos-grpc-client-executor-127.0.0.1-22] INFO  com.alibaba.nacos.common.remote.client - [1924fe5b-2f00-4760-9147-4342636f2437] Ack server push request, request = NotifySubscriberRequest, requestId = 9
2025-05-04 17:08:43.890 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:08:43.943 [NettyClientPublicExecutor_1] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000123A863947C6B1320E9040000, offsetMsgId=C0A80A6B00002A9F0000000000002E00, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=1], queueOffset=3]
2025-05-04 17:08:43.963 [ConsumeMessageThread_xiaohashu_group_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":8,"createTime":"2025-05-04 17:08:43"}, tags: Follow
2025-05-04 17:08:43.972 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:08:44.079 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 8(Long), 2025-05-04T17:08:43(LocalDateTime)
2025-05-04 17:08:44.083 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 17:08:44.085 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:08:44.086 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 8(Long), 100(Long), 2025-05-04T17:08:43(LocalDateTime)
2025-05-04 17:08:44.087 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 17:08:44.092 [ConsumeMessageThread_xiaohashu_group_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 17:09:00.930 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:09:00.930 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:09:00.931 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":11}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 17:09:00.932 [http-nio-8089-exec-3] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2025-05-04 17:09:00.944 [http-nio-8089-exec-3] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=100, followUserId=11, createTime=2025-05-04T17:09:00.941715)
2025-05-04 17:09:00.945 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 14ms, 出参: {"success":true} =================================== 
2025-05-04 17:09:00.947 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:09:00.950 [NettyClientPublicExecutor_2] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000123A863947C6B13212B910001, offsetMsgId=C0A80A6B00002A9F0000000000002F93, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=1], queueOffset=4]
2025-05-04 17:09:00.957 [ConsumeMessageThread_xiaohashu_group_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":11,"createTime":"2025-05-04 17:09:00"}, tags: Follow
2025-05-04 17:09:00.958 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:09:00.959 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 11(Long), 2025-05-04T17:09(LocalDateTime)
2025-05-04 17:09:00.961 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 17:09:00.961 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:09:00.962 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 11(Long), 100(Long), 2025-05-04T17:09(LocalDateTime)
2025-05-04 17:09:00.962 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 17:09:00.966 [ConsumeMessageThread_xiaohashu_group_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 17:09:04.889 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 100
2025-05-04 17:09:04.889 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 100
2025-05-04 17:09:04.890 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":12}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 17:09:04.891 [http-nio-8089-exec-2] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 100
2025-05-04 17:09:04.902 [http-nio-8089-exec-2] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=100, followUserId=12, createTime=2025-05-04T17:09:04.900232600)
2025-05-04 17:09:04.903 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 13ms, 出参: {"success":true} =================================== 
2025-05-04 17:09:04.904 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 100
2025-05-04 17:09:04.908 [NettyClientPublicExecutor_3] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000123A863947C6B13213B070002, offsetMsgId=C0A80A6B00002A9F0000000000003127, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=1], queueOffset=5]
2025-05-04 17:09:04.915 [ConsumeMessageThread_xiaohashu_group_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":12,"createTime":"2025-05-04 17:09:04"}, tags: Follow
2025-05-04 17:09:04.917 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:09:04.918 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 12(Long), 2025-05-04T17:09:04(LocalDateTime)
2025-05-04 17:09:04.919 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 17:09:04.919 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:09:04.919 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 12(Long), 100(Long), 2025-05-04T17:09:04(LocalDateTime)
2025-05-04 17:09:04.920 [ConsumeMessageThread_xiaohashu_group_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 17:09:04.924 [ConsumeMessageThread_xiaohashu_group_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 17:09:27.856 [http-nio-8089-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:09:27.856 [http-nio-8089-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:09:27.861 [http-nio-8089-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户关注列表], 入参: {"userId":100,"pageNo":1}, 请求类: RelationController, 请求方法: findFollowingList =================================== 
2025-05-04 17:09:27.878 [http-nio-8089-exec-6] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:09:27.889 [http-nio-8089-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户关注列表], 耗时: 26ms, 出参: {"success":true,"data":[{"userId":12,"nickname":"小红薯10005"},{"userId":11,"nickname":"小红薯4"},{"userId":8,"avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","nickname":"小红鼠8","introduction":"程序员"}],"pageNo":1,"totalCount":3,"pageSize":10,"totalPage":1} =================================== 
2025-05-04 17:09:27.890 [http-nio-8089-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:10:10.737 [http-nio-8089-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:10:10.737 [http-nio-8089-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:10:10.738 [http-nio-8089-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户关注列表], 入参: {"userId":100,"pageNo":1}, 请求类: RelationController, 请求方法: findFollowingList =================================== 
2025-05-04 17:10:10.742 [http-nio-8089-exec-5] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:10:10.752 [http-nio-8089-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户关注列表], 耗时: 14ms, 出参: {"success":true,"data":[{"userId":12,"nickname":"小红薯10005"},{"userId":11,"nickname":"小红薯4"},{"userId":8,"avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","nickname":"小红鼠8","introduction":"程序员"}],"pageNo":1,"totalCount":3,"pageSize":10,"totalPage":1} =================================== 
2025-05-04 17:10:10.753 [http-nio-8089-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:10:19.574 [http-nio-8089-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:10:19.574 [http-nio-8089-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:10:19.575 [http-nio-8089-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户关注列表], 入参: {"userId":100,"pageNo":1}, 请求类: RelationController, 请求方法: findFollowingList =================================== 
2025-05-04 17:10:19.580 [http-nio-8089-exec-4] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:10:19.588 [http-nio-8089-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户关注列表], 耗时: 13ms, 出参: {"success":true,"data":[{"userId":12,"nickname":"小红薯10005"},{"userId":11,"nickname":"小红薯4"},{"userId":8,"avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","nickname":"小红鼠8","introduction":"程序员"}],"pageNo":1,"totalCount":3,"pageSize":10,"totalPage":1} =================================== 
2025-05-04 17:10:19.590 [http-nio-8089-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:21:22.927 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 17:21:22.927 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 17:21:22.928 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 17:21:22.928 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 17:21:23.007 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 17:21:23.008 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 17:21:23.012 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@267b8487[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 17:21:23.013 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746349661607_127.0.0.1_58268
2025-05-04 17:21:23.014 [nacos-grpc-client-executor-127.0.0.1-186] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746349661607_127.0.0.1_58268]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 17:21:23.018 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@2bed716c[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 187]
2025-05-04 17:21:23.019 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2499413e[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 273]
2025-05-04 17:21:23.019 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 17:21:23.019 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 17:21:23.019 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 17:21:23.031 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:21:23.150 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 17:21:23.157 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 17:21:30.687 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:21:30.760 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:21:31.004 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:21:31.005 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 17:21:31.005 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 17:21:31.006 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 17:21:31.037 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:21:31.037 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:21:31.040 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 17:21:32.651 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:21:32.665 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 17:21:32.669 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 2893f041-1ac7-4071-a51b-247935531202_config-0
2025-05-04 17:21:32.688 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x000001a4d8368a90
2025-05-04 17:21:32.689 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000001a4d8368eb0
2025-05-04 17:21:32.689 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 17:21:32.690 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 17:21:32.697 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:21:32.730 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:21:34.430 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746350494238_127.0.0.1_58984
2025-05-04 17:21:34.430 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Notify connected event to listeners.
2025-05-04 17:21:34.430 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [2893f041-1ac7-4071-a51b-247935531202_config-0] Connected,notify listen context...
2025-05-04 17:21:34.431 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:21:34.431 [main] INFO  com.alibaba.nacos.common.remote.client - [2893f041-1ac7-4071-a51b-247935531202_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001a4d84b5f58
2025-05-04 17:21:34.470 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 17:21:34.485 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 17:21:34.491 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 17:21:34.496 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 17:21:34.497 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 17:21:34.522 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:21:34.522 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 17:21:35.224 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 17:21:35.227 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 17:21:35.250 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 17:21:35.438 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 17:21:35.475 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.717 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.772 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.776 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.778 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.779 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x000001a4d86c21e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.781 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.788 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:35.789 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:21:36.052 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 17:21:36.052 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 17:21:36.053 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 17:21:36.057 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 17:21:36.067 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 17:21:36.068 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 17:21:36.153 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 17:21:36.153 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1615 ms
2025-05-04 17:21:36.256 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 17:21:36.764 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 17:21:37.860 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:21:37.860 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 17:21:37.977 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 17:21:38.035 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 17:21:39.815 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:21:41.860 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:21:41.884 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 17:21:41.962 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 17:21:41.966 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 17:21:41.966 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 17:21:41.966 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 17:21:41.975 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:21:41.975 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:21:41.979 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of ad3cde27-b59b-403f-b79f-07a04eca5d09
2025-05-04 17:21:41.981 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 17:21:41.981 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 17:21:41.982 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 17:21:41.982 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:21:41.983 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:21:42.095 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746350501989_127.0.0.1_59019
2025-05-04 17:21:42.095 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:21:42.095 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Notify connected event to listeners.
2025-05-04 17:21:42.095 [main] INFO  com.alibaba.nacos.common.remote.client - [ad3cde27-b59b-403f-b79f-07a04eca5d09] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001a4d84b5f58
2025-05-04 17:21:42.095 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 17:21:42.097 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 17:21:42.107 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 17:21:43.596 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:21:43.607 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 14.981 seconds (process running for 15.689)
2025-05-04 17:21:43.611 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 17:21:43.612 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 17:21:43.620 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:21:43.620 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 17:21:43.621 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 17:21:43.621 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:21:43.621 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 17:21:43.621 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 17:21:43.621 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:21:43.621 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 17:23:02.544 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 17:23:02.544 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 17:23:02.544 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 17:23:02.544 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 17:23:02.606 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 17:23:02.606 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 17:23:02.608 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 17:23:02.609 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2645b906[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 17:23:02.610 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746350501989_127.0.0.1_59019
2025-05-04 17:23:02.612 [nacos-grpc-client-executor-127.0.0.1-29] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746350501989_127.0.0.1_59019]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 17:23:02.614 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5905a45c[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 30]
2025-05-04 17:23:02.614 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7bfdd6d2[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 26]
2025-05-04 17:23:02.615 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 17:23:02.615 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 17:23:02.615 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 17:23:02.624 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:23:02.637 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 17:23:02.643 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 17:23:08.281 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:23:08.350 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:23:08.588 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:23:08.590 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 17:23:08.590 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 17:23:08.591 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 17:23:08.622 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:23:08.622 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:23:08.625 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 17:23:10.232 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:23:10.246 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 17:23:10.250 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 1905e74c-a729-4848-9a40-6e9ae479eb29_config-0
2025-05-04 17:23:10.269 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x000001c395368a90
2025-05-04 17:23:10.269 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000001c395368eb0
2025-05-04 17:23:10.269 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 17:23:10.270 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 17:23:10.277 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:23:10.313 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:23:11.813 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746350591617_127.0.0.1_59209
2025-05-04 17:23:11.813 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Notify connected event to listeners.
2025-05-04 17:23:11.814 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Connected,notify listen context...
2025-05-04 17:23:11.814 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:23:11.814 [main] INFO  com.alibaba.nacos.common.remote.client - [1905e74c-a729-4848-9a40-6e9ae479eb29_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001c3954b6188
2025-05-04 17:23:11.857 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 17:23:11.871 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 17:23:11.878 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 17:23:11.883 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 17:23:11.884 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 17:23:11.912 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 17:23:11.912 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 17:23:12.633 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 17:23:12.636 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 17:23:12.658 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 17:23:12.819 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 17:23:12.851 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.085 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.140 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.143 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.144 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.145 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x000001c3956c2628] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.147 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.154 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.155 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 17:23:13.394 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 17:23:13.395 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 17:23:13.395 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 17:23:13.399 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 17:23:13.409 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 17:23:13.409 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 17:23:13.482 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 17:23:13.482 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1551 ms
2025-05-04 17:23:13.572 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 17:23:13.882 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 17:23:14.880 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 17:23:14.880 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 17:23:14.992 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 17:23:15.047 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 17:23:16.874 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:23:19.021 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:23:19.047 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 17:23:19.130 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 17:23:19.135 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 17:23:19.135 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 17:23:19.135 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 17:23:19.144 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 17:23:19.144 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 17:23:19.149 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 90f4dacc-4a30-4a16-9316-71a6189615a7
2025-05-04 17:23:19.152 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 17:23:19.152 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 17:23:19.152 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 17:23:19.153 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 17:23:19.153 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 17:23:19.263 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746350599159_127.0.0.1_59225
2025-05-04 17:23:19.263 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 17:23:19.263 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Notify connected event to listeners.
2025-05-04 17:23:19.263 [main] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001c3954b6188
2025-05-04 17:23:19.263 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 17:23:19.264 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 17:23:19.273 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 17:23:20.739 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 17:23:20.748 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 14.588 seconds (process running for 15.298)
2025-05-04 17:23:20.752 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 17:23:20.753 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 17:23:20.761 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:23:20.761 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 17:23:20.761 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 17:23:20.761 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:23:20.761 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 17:23:20.762 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 17:23:20.762 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 17:23:20.762 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 17:24:05.940 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 17:24:05.940 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 17:24:05.941 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 17:24:05.947 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:05.950 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:06.031 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [查询用户粉丝列表], 入参: {"userId":11,"pageNo":1}, 请求类: RelationController, 请求方法: findFansList =================================== 
2025-05-04 17:24:06.313 [http-nio-8089-exec-1] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:24:06.369 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-user, group:DEFAULT_GROUP, clusters: 
2025-05-04 17:24:06.379 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2025-05-04 17:24:06.381 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2025-05-04 17:24:06.433 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [查询用户粉丝列表], 耗时: 403ms, 出参: {"success":true,"data":[{"userId":12,"nickname":"小红薯10005","fansTotal":0,"noteTotal":0},{"userId":8,"avatar":"http://127.0.0.1:9000/xiaohashu/b231c3575b5a4f76b1154ec0ec507722.png","nickname":"小红鼠8","fansTotal":0,"noteTotal":0},{"userId":100,"nickname":"小红薯10100","fansTotal":0,"noteTotal":0}],"pageNo":1,"totalCount":3,"pageSize":10,"totalPage":1} =================================== 
2025-05-04 17:24:06.444 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:06.966 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Receive server push request, request = NotifySubscriberRequest, requestId = 14
2025-05-04 17:24:06.966 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [90f4dacc-4a30-4a16-9316-71a6189615a7] Ack server push request, request = NotifySubscriberRequest, requestId = 14
2025-05-04 17:24:43.547 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:43.548 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:43.552 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取关用户], 入参: {"unfollowUserId":11}, 请求类: RelationController, 请求方法: unfollow =================================== 
2025-05-04 17:24:43.554 [http-nio-8089-exec-2] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:24:43.607 [http-nio-8089-exec-2] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送取关操作 MQ, 消息体: UnfollowUserMqDTO(userId=8, unfollowUserId=11, createTime=2025-05-04T17:24:43.602365900)
2025-05-04 17:24:43.611 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取关用户], 耗时: 58ms, 出参: {"success":true} =================================== 
2025-05-04 17:24:43.612 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:43.647 [NettyClientPublicExecutor_1] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000124D463947C6B132F8DF70000, offsetMsgId=C0A80A6B00002A9F00000000000032BB, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2025-05-04 17:24:43.656 [ConsumeMessageThread_xiaohashu_group_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"unfollowUserId":11,"createTime":"2025-05-04 17:24:43"}, tags: Unfollow
2025-05-04 17:24:43.687 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==>  Preparing: delete from t_following where user_id = ? and following_user_id = ?
2025-05-04 17:24:43.855 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==> Parameters: 8(Long), 11(Long)
2025-05-04 17:24:43.860 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - <==    Updates: 1
2025-05-04 17:24:43.861 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==>  Preparing: delete from t_fans where user_id = ? and fans_user_id = ?
2025-05-04 17:24:43.862 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==> Parameters: 11(Long), 8(Long)
2025-05-04 17:24:43.863 [ConsumeMessageThread_xiaohashu_group_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - <==    Updates: 1
2025-05-04 17:24:59.176 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 17:24:59.177 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 17:24:59.180 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":11}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 17:24:59.181 [http-nio-8089-exec-3] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 17:24:59.195 [http-nio-8089-exec-3] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - ==>  Preparing: select user_id, following_user_id, create_time from t_following where user_id = ?
2025-05-04 17:24:59.201 [http-nio-8089-exec-3] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - ==> Parameters: 8(Long)
2025-05-04 17:24:59.217 [http-nio-8089-exec-3] DEBUG c.q.x.u.r.b.d.m.FollowingDOMapper.selectByUserId - <==      Total: 0
2025-05-04 17:24:59.226 [http-nio-8089-exec-3] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=8, followUserId=11, createTime=2025-05-04T17:24:59.189646600)
2025-05-04 17:24:59.226 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 46ms, 出参: {"success":true} =================================== 
2025-05-04 17:24:59.227 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 17:24:59.230 [NettyClientPublicExecutor_2] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000124D463947C6B132FCADB0001, offsetMsgId=C0A80A6B00002A9F0000000000003451, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=0], queueOffset=2]
2025-05-04 17:24:59.237 [ConsumeMessageThread_xiaohashu_group_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":11,"createTime":"2025-05-04 17:24:59"}, tags: Follow
2025-05-04 17:24:59.239 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:24:59.336 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 11(Long), 2025-05-04T17:24:59(LocalDateTime)
2025-05-04 17:24:59.341 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 17:24:59.341 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 17:24:59.342 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 11(Long), 8(Long), 2025-05-04T17:24:59(LocalDateTime)
2025-05-04 17:24:59.342 [ConsumeMessageThread_xiaohashu_group_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 17:24:59.346 [ConsumeMessageThread_xiaohashu_group_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 21:15:32.916 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 21:15:32.916 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 21:15:32.917 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 21:15:32.918 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 21:15:32.991 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 21:15:32.991 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 21:15:32.993 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 21:15:32.994 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@329392b9[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 21:15:32.995 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746350599159_127.0.0.1_59225
2025-05-04 21:15:32.996 [nacos-grpc-client-executor-127.0.0.1-1934] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746350599159_127.0.0.1_59225]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 21:15:33.000 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@d898931[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 1935]
2025-05-04 21:15:33.000 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@81f3ce[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 3201]
2025-05-04 21:15:33.001 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 21:15:33.001 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 21:15:33.001 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 21:15:33.013 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 21:15:33.136 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 21:15:33.138 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 21:15:40.552 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:15:40.622 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:15:40.856 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:15:40.858 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 21:15:40.858 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 21:15:40.859 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 21:15:40.891 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 21:15:40.892 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 21:15:40.894 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 21:15:42.497 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:15:42.512 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 21:15:42.516 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 0c03085c-8126-4fb8-a625-56621e4415f1_config-0
2025-05-04 21:15:42.534 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x0000028881369c90
2025-05-04 21:15:42.535 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000002888136a0b0
2025-05-04 21:15:42.535 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 21:15:42.536 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 21:15:42.543 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 21:15:42.574 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 21:15:43.901 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746364543717_127.0.0.1_54279
2025-05-04 21:15:43.901 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Notify connected event to listeners.
2025-05-04 21:15:43.902 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Connected,notify listen context...
2025-05-04 21:15:43.902 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 21:15:43.902 [main] INFO  com.alibaba.nacos.common.remote.client - [0c03085c-8126-4fb8-a625-56621e4415f1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x00000288814b91e8
2025-05-04 21:15:43.940 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 21:15:43.956 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 21:15:43.961 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 21:15:43.966 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 21:15:43.967 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 21:15:43.989 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:15:43.989 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 21:15:44.630 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 21:15:44.633 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 21:15:44.654 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-05-04 21:15:44.820 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 21:15:44.851 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.072 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.125 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.128 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.130 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.131 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x00000288816c4880] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.132 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.138 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.140 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:15:45.380 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 21:15:45.380 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 21:15:45.380 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 21:15:45.385 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 21:15:45.394 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 21:15:45.395 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 21:15:45.471 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 21:15:45.471 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1466 ms
2025-05-04 21:15:45.561 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 21:15:45.876 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 21:15:46.469 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 21:15:46.916 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_FollowUnfollowTopic', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 21:15:46.916 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 21:15:47.046 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 21:15:48.808 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:15:49.275 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":12,"followUserId":11,"createTime":"2025-05-03 22:12:53"}, tags: Follow
2025-05-04 21:15:49.275 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-01 18:34:41"}, tags: Follow
2025-05-04 21:15:49.275 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":11,"createTime":"2025-05-01 19:08:11"}, tags: Follow
2025-05-04 21:15:49.275 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"unfollowUserId":12,"createTime":"2025-05-03 23:14:37"}, tags: Unfollow
2025-05-04 21:15:49.315 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.315 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==>  Preparing: delete from t_following where user_id = ? and following_user_id = ?
2025-05-04 21:15:49.315 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.315 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.470 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==> Parameters: 8(Long), 12(Long)
2025-05-04 21:15:49.476 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - <==    Updates: 0
2025-05-04 21:15:49.511 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 12(Long), 2025-05-01T18:34:41(LocalDateTime)
2025-05-04 21:15:49.511 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 11(Long), 2025-05-01T19:08:11(LocalDateTime)
2025-05-04 21:15:49.511 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 12(Long), 11(Long), 2025-05-03T22:12:53(LocalDateTime)
2025-05-04 21:15:49.516 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.517 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.517 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 12(Long), 8(Long), 2025-05-01T18:34:41(LocalDateTime)
2025-05-04 21:15:49.519 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.523 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 21:15:49.566 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-11' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-11' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '8-11' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-11' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.566 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12-11' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12-11' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '12-11' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12-11' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.570 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.570 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.597 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"unfollowUserId":12,"createTime":"2025-05-03 22:23:05"}, tags: Unfollow
2025-05-04 21:15:49.597 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-03 22:08:42"}, tags: Follow
2025-05-04 21:15:49.598 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==>  Preparing: delete from t_following where user_id = ? and following_user_id = ?
2025-05-04 21:15:49.598 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.598 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==> Parameters: 8(Long), 12(Long)
2025-05-04 21:15:49.599 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 12(Long), 2025-05-03T22:08:42(LocalDateTime)
2025-05-04 21:15:49.600 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - <==    Updates: 1
2025-05-04 21:15:49.601 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==>  Preparing: delete from t_fans where user_id = ? and fans_user_id = ?
2025-05-04 21:15:49.601 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==> Parameters: 12(Long), 8(Long)
2025-05-04 21:15:49.603 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - <==    Updates: 1
2025-05-04 21:15:49.607 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.608 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.608 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 12(Long), 8(Long), 2025-05-03T22:08:42(LocalDateTime)
2025-05-04 21:15:49.609 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.613 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 21:15:49.772 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-03 22:53:02"}, tags: Follow
2025-05-04 21:15:49.773 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.773 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 12(Long), 2025-05-03T22:53:02(LocalDateTime)
2025-05-04 21:15:49.775 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.779 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.798 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-03 23:12:22"}, tags: Follow
2025-05-04 21:15:49.798 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"unfollowUserId":11,"createTime":"2025-05-04 17:24:43"}, tags: Unfollow
2025-05-04 21:15:49.799 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==>  Preparing: delete from t_following where user_id = ? and following_user_id = ?
2025-05-04 21:15:49.799 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.800 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==> Parameters: 8(Long), 11(Long)
2025-05-04 21:15:49.800 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 12(Long), 2025-05-03T23:12:22(LocalDateTime)
2025-05-04 21:15:49.802 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - <==    Updates: 1
2025-05-04 21:15:49.802 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==>  Preparing: delete from t_fans where user_id = ? and fans_user_id = ?
2025-05-04 21:15:49.802 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.803 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==> Parameters: 11(Long), 8(Long)
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322A60007, offsetMsgId=C0A80A6B00002A9F0000000000003CFA, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322A60006, offsetMsgId=C0A80A6B00002A9F0000000000003B93, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322910000, offsetMsgId=C0A80A6B00002A9F000000000000374F, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322930001, offsetMsgId=C0A80A6B00002A9F00000000000035E3, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=0], queueOffset=0]
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_5] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322A60005, offsetMsgId=C0A80A6B00002A9F00000000000038BB, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2025-05-04 21:15:49.804 [NettyClientPublicExecutor_6] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322A60004, offsetMsgId=C0A80A6B00002A9F0000000000003A27, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2025-05-04 21:15:49.804 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - <==    Updates: 1
2025-05-04 21:15:49.805 [NettyClientPublicExecutor_7] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322990003, offsetMsgId=C0A80A6B00002A9F0000000000003E61, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2025-05-04 21:15:49.806 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.806 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":8,"createTime":"2025-05-04 17:08:43"}, tags: Follow
2025-05-04 21:15:49.807 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.808 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 8(Long), 2025-05-04T17:08:43(LocalDateTime)
2025-05-04 21:15:49.809 [NettyClientPublicExecutor_8] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322970002, offsetMsgId=C0A80A6B00002A9F0000000000003FC8, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2025-05-04 21:15:49.809 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-8' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-8' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '100-8' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-8' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.813 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":11,"createTime":"2025-05-04 17:24:59"}, tags: Follow
2025-05-04 21:15:49.813 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.813 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":11,"createTime":"2025-05-04 17:09:00"}, tags: Follow
2025-05-04 21:15:49.813 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.814 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.814 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 11(Long), 2025-05-04T17:24:59(LocalDateTime)
2025-05-04 21:15:49.815 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 11(Long), 2025-05-04T17:09(LocalDateTime)
2025-05-04 21:15:49.815 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.816 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.816 [NettyClientPublicExecutor_9] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322B50009, offsetMsgId=C0A80A6B00002A9F000000000000429B, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=3], queueOffset=1]
2025-05-04 21:15:49.817 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 11(Long), 8(Long), 2025-05-04T17:24:59(LocalDateTime)
2025-05-04 21:15:49.817 [NettyClientPublicExecutor_10] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322B40008, offsetMsgId=C0A80A6B00002A9F000000000000412F, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=3], queueOffset=0]
2025-05-04 21:15:49.818 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 21:15:49.818 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-11' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-11' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '100-11' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-11' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.821 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.821 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":100,"followUserId":12,"createTime":"2025-05-04 17:09:04"}, tags: Follow
2025-05-04 21:15:49.822 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:15:49.822 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 21:15:49.823 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 100(Long), 12(Long), 2025-05-04T17:09:04(LocalDateTime)
2025-05-04 21:15:49.824 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-12' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-12' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '100-12' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100-12' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:15:49.827 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_4] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:15:49.829 [NettyClientPublicExecutor_11] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322C2000B, offsetMsgId=C0A80A6B00002A9F0000000000004402, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=1], queueOffset=2]
2025-05-04 21:15:49.830 [NettyClientPublicExecutor_12] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B140322C2000A, offsetMsgId=C0A80A6B00002A9F0000000000004569, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=0], queueOffset=2]
2025-05-04 21:15:50.925 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:15:50.948 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 21:15:51.023 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 21:15:51.027 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 21:15:51.027 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 21:15:51.028 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 21:15:51.036 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 21:15:51.036 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 21:15:51.040 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 8e5d8cbe-db2e-4a25-9afe-49de9fa92142
2025-05-04 21:15:51.042 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 21:15:51.042 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 21:15:51.042 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 21:15:51.042 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 21:15:51.043 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 21:15:51.154 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746364551048_127.0.0.1_54294
2025-05-04 21:15:51.154 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 21:15:51.154 [main] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x00000288814b91e8
2025-05-04 21:15:51.154 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Notify connected event to listeners.
2025-05-04 21:15:51.154 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 21:15:51.155 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 21:15:51.163 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 21:15:52.632 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:15:52.643 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 14.285 seconds (process running for 14.984)
2025-05-04 21:15:52.648 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 21:15:52.649 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 21:15:52.658 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:15:52.658 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 21:15:52.658 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 21:15:52.658 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:15:52.658 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 21:15:52.659 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 21:15:52.659 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:15:52.659 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 21:19:32.718 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 21:19:32.718 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 21:19:32.720 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-05-04 21:19:32.727 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:19:32.730 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:19:32.816 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":12}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 21:19:32.826 [http-nio-8089-exec-1] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 21:19:32.886 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-user, group:DEFAULT_GROUP, clusters: 
2025-05-04 21:19:32.896 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2025-05-04 21:19:32.898 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2025-05-04 21:19:32.951 [http-nio-8089-exec-1] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=8, followUserId=12, createTime=2025-05-04T21:19:32.946139400)
2025-05-04 21:19:32.953 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 138ms, 出参: {"success":true} =================================== 
2025-05-04 21:19:32.957 [NettyClientPublicExecutor_13] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001594463947C6B14068A5B000C, offsetMsgId=C0A80A6B00002A9F00000000000046D5, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=0], queueOffset=3]
2025-05-04 21:19:32.965 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:19:32.967 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_5] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-04 21:19:32"}, tags: Follow
2025-05-04 21:19:32.968 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_5] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (id, user_id, following_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:19:32.968 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_5] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: null, 8(Long), 12(Long), 2025-05-04T21:19:32(LocalDateTime)
2025-05-04 21:19:32.970 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_5] ERROR c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - 
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
### The error may exist in file [D:\xiaohashu\xiaohashu\xiaohashu-user-relation\xiaohashu-user-relation-biz\target\classes\mapper\FollowingDOMapper.xml]
### The error may involve com.quanxiaoha.xiaohashu.user.relation.biz.domain.mapper.FollowingDOMapper.insert-Inline
### The error occurred while setting parameters
### SQL: insert into t_following (id, user_id, following_user_id,        create_time)     values (?, ?, ?,        ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
; Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:253)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:142)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.lambda$handleFollowTagMessage$0(FollowUnfollowConsumer.java:101)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.handleFollowTagMessage(FollowUnfollowConsumer.java:97)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:74)
	at com.quanxiaoha.xiaohashu.user.relation.biz.consumer.FollowUnfollowConsumer.onMessage(FollowUnfollowConsumer.java:37)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.handleMessage(DefaultRocketMQListenerContainer.java:461)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.access$100(DefaultRocketMQListenerContainer.java:71)
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer$DefaultMessageListenerOrderly.consumeMessage(DefaultRocketMQListenerContainer.java:444)
	at org.apache.rocketmq.client.impl.consumer.ConsumeMessageOrderlyService$ConsumeRequest.run(ConsumeMessageOrderlyService.java:498)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '8-12' for key 't_following.uk_user_id_following_user_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3462)
	at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1063)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:434)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3460)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:158)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy3/jdk.proxy3.$Proxy114.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 20 common frames omitted
2025-05-04 21:19:32.972 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_5] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：false
2025-05-04 21:19:33.408 [nacos-grpc-client-executor-127.0.0.1-54] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Receive server push request, request = NotifySubscriberRequest, requestId = 17
2025-05-04 21:19:33.408 [nacos-grpc-client-executor-127.0.0.1-54] INFO  com.alibaba.nacos.common.remote.client - [8e5d8cbe-db2e-4a25-9afe-49de9fa92142] Ack server push request, request = NotifySubscriberRequest, requestId = 17
2025-05-04 21:22:26.094 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 21:22:26.094 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 21:22:26.094 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 21:22:26.094 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 21:22:26.108 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2025-05-04 21:22:26.109 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 21:22:26.145 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 21:22:26.145 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 21:22:26.148 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 21:22:26.148 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 21:22:26.148 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 21:22:26.148 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@32b30199[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 21:22:26.149 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746364551048_127.0.0.1_54294
2025-05-04 21:22:26.150 [nacos-grpc-client-executor-127.0.0.1-89] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746364551048_127.0.0.1_54294]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 21:22:26.153 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@77934134[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 90]
2025-05-04 21:22:26.153 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7b13203c[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 131]
2025-05-04 21:22:26.153 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 21:22:26.153 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 21:22:26.153 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 21:22:26.157 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_FollowUnfollowTopic', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 21:22:26.164 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2025-05-04 21:22:26.164 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 21:22:26.280 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 21:22:26.286 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-05-04 21:22:30.633 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:22:30.701 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:22:30.948 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:22:30.950 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-05-04 21:22:30.950 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-05-04 21:22:30.951 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-05-04 21:22:30.983 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 21:22:30.983 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 21:22:30.986 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-05-04 21:22:32.603 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:22:32.620 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\15149\nacos\config
2025-05-04 21:22:32.624 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 1419b574-de1a-42ce-93df-e79be0d1d645_config-0
2025-05-04 21:22:32.644 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$577/0x000001844f368a90
2025-05-04 21:22:32.645 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$578/0x000001844f368eb0
2025-05-04 21:22:32.645 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-05-04 21:22:32.646 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-05-04 21:22:32.654 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 21:22:32.685 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 21:22:34.142 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746364953958_127.0.0.1_56511
2025-05-04 21:22:34.143 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Notify connected event to listeners.
2025-05-04 21:22:34.143 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Connected,notify listen context...
2025-05-04 21:22:34.143 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 21:22:34.143 [main] INFO  com.alibaba.nacos.common.remote.client - [1419b574-de1a-42ce-93df-e79be0d1d645_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001844f4b63d0
2025-05-04 21:22:34.183 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-05-04 21:22:34.198 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation] & group[DEFAULT_GROUP]
2025-05-04 21:22:34.205 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation.properties] & group[DEFAULT_GROUP]
2025-05-04 21:22:34.212 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-user-relation-dev.properties] & group[DEFAULT_GROUP]
2025-05-04 21:22:34.213 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation-dev.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation.properties,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-user-relation,DEFAULT_GROUP'}]
2025-05-04 21:22:34.239 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-05-04 21:22:34.240 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - The following 1 profile is active: "dev"
2025-05-04 21:22:34.923 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 21:22:34.926 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 21:22:34.947 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 21:22:35.117 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=4e3205ab-39ef-38fe-b862-8cdb7e892169
2025-05-04 21:22:35.152 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.quanxiaoha.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.378 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.431 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.433 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.434 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.435 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$752/0x000001844f6c2f38] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.437 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.443 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.444 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-05-04 21:22:35.691 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8089 (http)
2025-05-04 21:22:35.692 [main] INFO  org.apache.catalina.core.AprLifecycleListener - An older version [1.3.1] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]
2025-05-04 21:22:35.692 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.3.1] using APR version [1.7.4].
2025-05-04 21:22:35.696 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-05-04 21:22:35.706 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-04 21:22:35.706 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-05-04 21:22:35.781 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-04 21:22:35.781 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1522 ms
2025-05-04 21:22:35.872 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-05-04 21:22:36.184 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-05-04 21:22:36.812 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-05-04 21:22:37.248 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_FollowUnfollowTopic', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 21:22:37.249 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:followUnfollowConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-05-04 21:22:37.367 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-05-04 21:22:39.132 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:22:41.209 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:22:41.234 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-04 21:22:41.310 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8089 (http) with context path ''
2025-05-04 21:22:41.314 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-05-04 21:22:41.315 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-05-04 21:22:41.315 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-05-04 21:22:41.325 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-05-04 21:22:41.325 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-05-04 21:22:41.330 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 642b45ab-bf85-4fa2-a9c8-94e53314195f
2025-05-04 21:22:41.332 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-05-04 21:22:41.333 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-05-04 21:22:41.333 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-05-04 21:22:41.334 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-05-04 21:22:41.334 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-05-04 21:22:41.446 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1746364961340_127.0.0.1_56526
2025-05-04 21:22:41.446 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-05-04 21:22:41.446 [main] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$598/0x000001844f4b63d0
2025-05-04 21:22:41.446 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Notify connected event to listeners.
2025-05-04 21:22:41.446 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-05-04 21:22:41.447 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-user-relation with instance Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-05-04 21:22:41.458 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-user-relation 192.168.37.1:8089 register finished
2025-05-04 21:22:42.942 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-05-04 21:22:42.953 [main] INFO  c.q.x.u.r.biz.XiaohashuUserRelationBizApplication - Started XiaohashuUserRelationBizApplication in 14.376 seconds (process running for 15.071)
2025-05-04 21:22:42.956 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-05-04 21:22:42.957 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation-dev.properties+DEFAULT_GROUP
2025-05-04 21:22:42.964 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:22:42.964 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation-dev.properties, group=DEFAULT_GROUP
2025-05-04 21:22:42.965 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation+DEFAULT_GROUP
2025-05-04 21:22:42.965 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:22:42.965 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation, group=DEFAULT_GROUP
2025-05-04 21:22:42.965 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-127.0.0.1_8848] [subscribe] xiaohashu-user-relation.properties+DEFAULT_GROUP
2025-05-04 21:22:42.966 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-127.0.0.1_8848] [add-listener] ok, tenant=, dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP, cnt=1
2025-05-04 21:22:42.966 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-user-relation.properties, group=DEFAULT_GROUP
2025-05-04 21:23:39.966 [http-nio-8089-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 21:23:39.967 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-04 21:23:39.968 [http-nio-8089-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-04 21:23:39.975 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:23:39.978 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:23:40.061 [http-nio-8089-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":12}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 21:23:40.069 [http-nio-8089-exec-1] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 21:23:40.129 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-user, group:DEFAULT_GROUP, clusters: 
2025-05-04 21:23:40.139 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2025-05-04 21:23:40.140 [http-nio-8089-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-user -> [{"ip":"192.168.37.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2025-05-04 21:23:40.464 [http-nio-8089-exec-1] WARN  c.q.x.u.r.biz.exception.GlobalExceptionHandler - /relation/follow request fail, errorCode: RELATION-20004, errorMessage: 您已经关注了该用户
2025-05-04 21:23:40.474 [http-nio-8089-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:23:40.738 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Receive server push request, request = NotifySubscriberRequest, requestId = 20
2025-05-04 21:23:40.739 [nacos-grpc-client-executor-127.0.0.1-20] INFO  com.alibaba.nacos.common.remote.client - [642b45ab-bf85-4fa2-a9c8-94e53314195f] Ack server push request, request = NotifySubscriberRequest, requestId = 20
2025-05-04 21:23:47.129 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:23:47.129 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:23:47.134 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取关用户], 入参: {"unfollowUserId":12}, 请求类: RelationController, 请求方法: unfollow =================================== 
2025-05-04 21:23:47.135 [http-nio-8089-exec-2] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 21:23:47.154 [http-nio-8089-exec-2] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送取关操作 MQ, 消息体: UnfollowUserMqDTO(userId=8, unfollowUserId=12, createTime=2025-05-04T21:23:47.148680300)
2025-05-04 21:23:47.158 [http-nio-8089-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取关用户], 耗时: 24ms, 出参: {"success":true} =================================== 
2025-05-04 21:23:47.160 [http-nio-8089-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:23:47.200 [NettyClientPublicExecutor_1] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140A6B780000, offsetMsgId=C0A80A6B00002A9F0000000000004867, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=0], queueOffset=4]
2025-05-04 21:23:47.208 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"unfollowUserId":12,"createTime":"2025-05-04 21:23:47"}, tags: Unfollow
2025-05-04 21:23:47.242 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==>  Preparing: delete from t_following where user_id = ? and following_user_id = ?
2025-05-04 21:23:47.417 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - ==> Parameters: 8(Long), 12(Long)
2025-05-04 21:23:47.421 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFollowingUserId - <==    Updates: 1
2025-05-04 21:23:47.422 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==>  Preparing: delete from t_fans where user_id = ? and fans_user_id = ?
2025-05-04 21:23:47.423 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - ==> Parameters: 12(Long), 8(Long)
2025-05-04 21:23:47.425 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_1] DEBUG c.q.x.u.r.b.d.m.F.deleteByUserIdAndFansUserId - <==    Updates: 1
2025-05-04 21:23:47.442 [NettyClientPublicExecutor_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140A6C6F0001, offsetMsgId=C0A80A6B00002A9F00000000000049FD, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2025-05-04 21:23:47.444 [NettyClientPublicExecutor_3] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140A6C710002, offsetMsgId=C0A80A6B00002A9F0000000000004B69, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=0], queueOffset=1]
2025-05-04 21:24:08.766 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 8
2025-05-04 21:24:08.766 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 8
2025-05-04 21:24:08.767 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [关注用户], 入参: {"followUserId":12}, 请求类: RelationController, 请求方法: follow =================================== 
2025-05-04 21:24:08.767 [http-nio-8089-exec-3] INFO  c.q.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 8
2025-05-04 21:24:08.777 [http-nio-8089-exec-3] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> 开始发送关注操作 MQ, 消息体: FollowUserMqDTO(userId=8, followUserId=12, createTime=2025-05-04T21:24:08.773067)
2025-05-04 21:24:08.779 [http-nio-8089-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [关注用户], 耗时: 12ms, 出参: {"success":true} =================================== 
2025-05-04 21:24:08.780 [http-nio-8089-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 8
2025-05-04 21:24:08.783 [NettyClientPublicExecutor_4] INFO  c.q.x.u.r.biz.service.impl.RelationServiceImpl - ==> MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140ABFCB0003, offsetMsgId=C0A80A6B00002A9F0000000000004CD0, messageQueue=MessageQueue [topic=FollowUnfollowTopic, brokerName=broker-a, queueId=0], queueOffset=5]
2025-05-04 21:24:08.788 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> FollowUnfollowConsumer 消费了消息 {"userId":8,"followUserId":12,"createTime":"2025-05-04 21:24:08"}, tags: Follow
2025-05-04 21:24:08.791 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==>  Preparing: insert into t_following (user_id, following_user_id, create_time) values (?, ?, ?)
2025-05-04 21:24:08.896 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - ==> Parameters: 8(Long), 12(Long), 2025-05-04T21:24:08(LocalDateTime)
2025-05-04 21:24:08.900 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.b.domain.mapper.FollowingDOMapper.insert - <==    Updates: 1
2025-05-04 21:24:08.900 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==>  Preparing: insert into t_fans (id, user_id, fans_user_id, create_time) values (?, ?, ?, ?)
2025-05-04 21:24:08.903 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - ==> Parameters: null, 12(Long), 8(Long), 2025-05-04T21:24:08(LocalDateTime)
2025-05-04 21:24:08.904 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] DEBUG c.q.x.u.r.biz.domain.mapper.FansDOMapper.insert - <==    Updates: 1
2025-05-04 21:24:08.908 [ConsumeMessageThread_xiaohashu_group_FollowUnfollowTopic_2] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ## 数据库添加记录结果：true
2025-05-04 21:24:08.916 [NettyClientPublicExecutor_5] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：关注数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140AC0510004, offsetMsgId=C0A80A6B00002A9F0000000000004E62, messageQueue=MessageQueue [topic=CountFollowingTopic, brokerName=broker-a, queueId=2], queueOffset=1]
2025-05-04 21:24:08.916 [NettyClientPublicExecutor_6] INFO  c.q.x.u.r.biz.consumer.FollowUnfollowConsumer - ==> 【计数服务：粉丝数】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001075063947C6B140AC0510005, offsetMsgId=C0A80A6B00002A9F0000000000004FCE, messageQueue=MessageQueue [topic=CountFansTopic, brokerName=broker-a, queueId=2], queueOffset=0]
2025-05-04 23:17:28.260 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:28.260 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:32.265 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:38.270 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:40.964 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:53.276 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:56.279 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:17:59.280 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:18:10.964 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:18:40.965 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:18:59.312 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:19:02.313 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:19:10.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:19:26.330 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:19:40.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:20:10.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:20:20.359 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:20:40.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:20:44.370 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:20:56.375 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:05.378 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:10.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:20.384 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:26.387 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:32.390 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:21:40.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:22:10.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:22:14.410 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:22:38.422 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:22:40.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:02.433 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:10.964 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:11.438 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:32.452 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:35.453 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:23:40.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:24:10.963 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:24:26.479 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:24:40.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:25:10.962 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:25:14.498 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:26:05.520 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:26:08.522 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.10.107:10911] result: true
2025-05-04 23:44:33.601 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-05-04 23:44:33.601 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-05-04 23:44:33.602 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-05-04 23:44:33.603 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-05-04 23:44:33.616 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2025-05-04 23:44:33.617 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.69.209:10911] result: true
2025-05-04 23:44:33.670 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-05-04 23:44:33.670 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-user-relation with instance: Instance{instanceId='null', ip='192.168.37.1', port=8089, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-05-04 23:44:33.672 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-05-04 23:44:33.672 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2eab7ea6[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-05-04 23:44:33.673 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1746364961340_127.0.0.1_56526
2025-05-04 23:44:33.675 [nacos-grpc-client-executor-127.0.0.1-1712] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1746364961340_127.0.0.1_56526]Ignore complete event,isRunning:false,isAbandon=false
2025-05-04 23:44:33.679 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@437cc5e8[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 1713]
2025-05-04 23:44:33.679 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@192b5bf3[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 2836]
2025-05-04 23:44:33.679 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-05-04 23:44:33.680 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-05-04 23:44:33.680 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-05-04 23:44:33.683 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_FollowUnfollowTopic', namespace='', nameServer='127.0.0.1:9876', topic='FollowUnfollowTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-05-04 23:44:33.694 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[127.0.0.1:9876] result: true
2025-05-04 23:44:33.695 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.69.209:10911] result: true
2025-05-04 23:44:33.821 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-05-04 23:44:33.822 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
